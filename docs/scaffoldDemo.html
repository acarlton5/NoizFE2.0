<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NOIZ Scaffold ‚Äî Canonical + Dev Bar (immerse keeps rail)</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
:root{
  --app-bar-h:28px;
  --mobile-rail-h:64px;

  /* demo colors only */
  --c-bg:#0b0f14; --c-text:#e5e7eb;
  --c-app:#1f2937; --c-rail:#111827; --c-nav:#0ea5e9;
  --c-head:#f59e0b; --c-main:#6366f1; --c-side:#9333ea;
  --c-user:#22c55e; --c-noti:#ef4444;
}
html,body{height:100%}
body{background:var(--c-bg);color:var(--c-text);margin:0}

/* regions */
.app-bar{background:var(--c-app);height:var(--app-bar-h);display:flex;align-items:center;padding:0 .75rem;border-bottom:1px solid #00000055}
.rail{background:var(--c-rail)}
.nav-pane{background:var(--c-nav);color:#031825}
.main-header{background:var(--c-head);color:#241600}
.main{background:var(--c-main)}
.sidebar{background:var(--c-side)}
.user-bar{background:var(--c-user);color:#06210e}
.toast-demo{background:var(--c-noti);color:#2a0707}

/* height logic */
.page{height:calc(100vh - var(--app-bar-h))}
.fill{height:100%;min-height:0}

/* flush layout */
.container-fluid{padding:0}
.row{--bs-gutter-x:0;--bs-gutter-y:0}

/* rail buttons */
.rail .btn{width:44px;height:44px;display:grid;place-items:center;padding:0}

/* user-bar float */
.user-float{position:fixed;left:.75rem;bottom:.75rem;z-index:1080;padding:.5rem .75rem}
@media (max-width:991.98px){
  body{padding-bottom:var(--mobile-rail-h)}
  .user-float{bottom:calc(var(--mobile-rail-h) + .5rem);left:.5rem;right:.5rem}
}

/* mobile rail */
.rail-m{height:var(--mobile-rail-h);background:#0b1220;border-top:1px solid #ffffff22}

/* DEV BAR (floating on the right) */
.dev-bar{
  position:fixed; top:50%; right:.75rem; transform:translateY(-50%);
  z-index:1100; width:220px;
  background:#0f172a; border:1px solid #ffffff22;
}
.dev-bar .hdr{background:#111827;color:#cbd5e1;padding:.5rem .75rem;font-weight:600;letter-spacing:.02em}
.dev-bar .body{padding:.5rem}
.dev-bar .btn{width:100%; margin-bottom:.5rem}
.dev-pill{display:inline-block; font-size:.75rem; background:#00000055; color:#e5e7eb; padding:.15rem .45rem; border-radius:.25rem}

/* force hide helper */
.force-hidden{display:none !important;}
</style>
</head>
<body>

<!-- APP BAR -->
<nav class="navbar app-bar w-100" data-module="app-bar">
  <span class="fw-semibold text-light">APP BAR</span>
  <div class="ms-auto">
    <button class="btn btn-sm btn-outline-light" id="toastBtn">Toast</button>
  </div>
</nav>

<!-- PAGE -->
<div class="container-fluid page" data-module="page">
  <div class="row fill">

    <!-- RAIL -->
    <aside class="col-auto d-none d-lg-flex flex-column align-items-center rail p-2 fill" data-module="rail">
      <div class="small fw-semibold mb-2 text-uppercase">RAIL</div>
      <button class="btn btn-outline-light mb-2" title="Home">üè†</button>
      <button class="btn btn-outline-light mb-2" title="Discover">üîé</button>
      <button class="btn btn-outline-light mb-2" title="Following">‚≠ê</button>
      <button class="btn btn-outline-light" data-bs-toggle="offcanvas" data-bs-target="#nav-pane-m" title="Open Nav">‚â°</button>
    </aside>

    <!-- NAV-PANE -->
    <nav class="col-lg-2 d-none d-lg-block nav-pane p-3 fill" data-module="nav-pane">
      <div class="fw-semibold mb-2 text-uppercase">NAV-PANE</div>
      <ul class="list-unstyled m-0">
        <li># Announcements</li>
        <li># Stream-Clips</li>
        <li># Twitch-Live</li>
        <li># Tea-Room</li>
      </ul>
    </nav>

    <!-- CONTENT STACK -->
    <section class="col d-flex flex-column fill">
      <!-- MAIN-HEADER -->
      <header class="main-header p-3 flex-shrink-0" data-module="main-header">
        <div class="fw-semibold text-uppercase">MAIN-HEADER</div>
      </header>

      <!-- MAIN + SIDEBAR -->
      <div class="row flex-grow-1 min-vh-0" id="contentRow">
        <main class="col-12 col-lg-8 main p-3 fill overflow-auto" data-module="main">
          <div class="fw-semibold text-uppercase mb-2">MAIN</div>
          <p class="mb-0">All primary content goes here.</p>
        </main>

        <aside class="col-12 col-lg-4 sidebar p-3 fill overflow-auto" data-module="sidebar">
          <div class="fw-semibold text-uppercase mb-2">SIDEBAR</div>
          <p class="mb-0">Chat / Quests / Stats</p>
        </aside>
      </div>
    </section>
  </div>
</div>

<!-- USER-BAR -->
<div class="user-bar user-float" data-module="user-bar">
  <span class="fw-semibold me-2 text-uppercase">USER-BAR</span>
  <span class="badge text-bg-dark">Online</span>
</div>

<!-- TOASTS -->
<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index:1090" data-module="noti">
  <div id="demoToast" class="toast align-items-center border-0 toast-demo" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">NOTI / TOASTS</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
</div>

<!-- RAIL-M (mobile bottom) -->
<nav class="navbar fixed-bottom d-lg-none rail-m" data-module="rail-m">
  <div class="container-fluid justify-content-around p-0">
    <button class="btn btn-light btn-sm">üè†</button>
    <button class="btn btn-light btn-sm">üîé</button>
    <button class="btn btn-light btn-sm">‚≠ê</button>
    <button class="btn btn-light btn-sm" data-bs-toggle="offcanvas" data-bs-target="#nav-pane-m">‚â°</button>
  </div>
</nav>

<!-- NAV-PANE-M (offcanvas) -->
<div class="offcanvas offcanvas-start text-bg-dark" tabindex="-1" id="nav-pane-m" data-module="nav-pane-m" style="--bs-offcanvas-width:100vw;">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">NAV-PANE (overlay)</h5>
    <button class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body nav-pane p-3">
    <ul class="list-unstyled fs-5 m-0">
      <li><a href="#" class="link-dark" data-bs-dismiss="offcanvas"># Announcements</a></li>
      <li><a href="#" class="link-dark" data-bs-dismiss="offcanvas"># Stream-Clips</a></li>
      <li><a href="#" class="link-dark" data-bs-dismiss="offcanvas"># Twitch-Live</a></li>
      <li><a href="#" class="link-dark" data-bs-dismiss="offcanvas"># Tea-Room</a></li>
    </ul>
  </div>
</div>

<!-- DEV BAR -->
<div class="dev-bar shadow" id="devBar">
  <div class="hdr">
    Dev Bar <span class="dev-pill ms-2" id="statePill">default</span>
    <div class="small mt-1">Note: Hiding the <strong>Rail</strong> is <em>not recommended</em>.</div>
  </div>
  <div class="body">
    <div class="fw-semibold mb-1">Presets</div>
    <button class="btn btn-sm btn-primary" id="presetDefault">Default</button>
    <button class="btn btn-sm btn-secondary" id="presetImmerse">Immerse (keep rail)</button>
    <button class="btn btn-sm btn-info" id="presetChatFocus">Chat-Focus</button>
    <button class="btn btn-sm btn-dark" id="presetCompact">Compact</button>

    <div class="fw-semibold mb-1 mt-3">Toggles</div>
    <button class="btn btn-sm btn-outline-light" id="toggleRail">Toggle Rail</button>
    <button class="btn btn-sm btn-outline-light" id="toggleNav">Toggle Nav-Pane</button>
    <button class="btn btn-sm btn-outline-light" id="toggleSidebar">Toggle Sidebar</button>

    <div class="fw-semibold mb-1 mt-3">Helpers</div>
    <button class="btn btn-sm btn-success" id="openMobileNav">Open Mobile Nav</button>
    <button class="btn btn-sm btn-warning" id="showToast">Show Toast</button>
    <button class="btn btn-sm btn-outline-danger" id="resetAll">Reset</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
/* ===== Elements ===== */
const rail      = document.querySelector('[data-module="rail"]');
const navPane   = document.querySelector('[data-module="nav-pane"]');
const main      = document.querySelector('[data-module="main"]');
const sidebar   = document.querySelector('[data-module="sidebar"]');
const offcanvas = document.getElementById('nav-pane-m');
const statePill = document.getElementById('statePill');

/* Store originals once */
for (const el of [rail, navPane, main, sidebar]) {
  if (el && !el.dataset.orig) el.dataset.orig = el.className;
}

/* State */
const state = {
  rail: true, nav: true, sidebar: true,
  mainLg: 8, sideLg: 4, mode: 'default'
};

/* Utilities */
function forceHide(el){ if(!el) return; el.classList.add('force-hidden'); }
function forceShow(el){ if(!el) return; el.classList.remove('force-hidden'); el.className = el.dataset.orig; }

function setCols(el, lgCols){
  if(!el) return;
  el.className = el.dataset.orig
    .replace(/\bcol-\d+\b/g,'')
    .replace(/\bcol-lg-\d+\b/g,'');
  el.classList.add('col-12', `col-lg-${lgCols}`);
}

function apply(){
  state.rail ? forceShow(rail) : forceHide(rail);
  state.nav  ? forceShow(navPane) : forceHide(navPane);
  state.sidebar ? forceShow(sidebar) : forceHide(sidebar);

  if(!state.sidebar){
    setCols(main, 12);
  } else {
    setCols(main, state.mainLg);
    setCols(sidebar, state.sideLg);
  }
  statePill.textContent = state.mode;
}

/* Presets */
function presetDefault(){ Object.assign(state,{rail:true,nav:true,sidebar:true,mainLg:8,sideLg:4,mode:'default'}); apply(); }
/* Immerse: keep rail, hide nav-pane, widen sidebar */
function presetImmerse(){ Object.assign(state,{rail:true,nav:false,sidebar:true,mainLg:7,sideLg:5,mode:'immerse'}); apply(); }
function presetChatFocus(){ Object.assign(state,{rail:true,nav:true,sidebar:true,mainLg:7,sideLg:5,mode:'chat-focus'}); apply(); }
function presetCompact(){ Object.assign(state,{rail:false,nav:false,sidebar:true,mainLg:9,sideLg:3,mode:'compact'}); apply(); }

/* Toggles */
function toggleRail(){ state.rail = !state.rail; state.mode='custom'; apply(); }
function toggleNav(){  state.nav  = !state.nav;  state.mode='custom'; apply(); }
function toggleSidebar(){
  state.sidebar = !state.sidebar;
  if(state.sidebar && state.mainLg === 12){ state.mainLg = 8; state.sideLg = 4; }
  state.mode='custom'; apply();
}

/* Helpers */
function openMobileNav(){ bootstrap.Offcanvas.getOrCreateInstance(offcanvas).show(); }
const toastEl = document.getElementById('demoToast');
const toast   = bootstrap.Toast.getOrCreateInstance(toastEl, { delay: 2500 });
document.getElementById('toastBtn').addEventListener('click', ()=> toast.show());
function showToast(){ toast.show(); }
function resetAll(){ presetDefault(); }

/* Wire */
document.getElementById('presetDefault').onclick   = presetDefault;
document.getElementById('presetImmerse').onclick   = presetImmerse;
document.getElementById('presetChatFocus').onclick = presetChatFocus;
document.getElementById('presetCompact').onclick   = presetCompact;
document.getElementById('toggleRail').onclick      = toggleRail;
document.getElementById('toggleNav').onclick       = toggleNav;
document.getElementById('toggleSidebar').onclick   = toggleSidebar;
document.getElementById('openMobileNav').onclick   = openMobileNav;
document.getElementById('showToast').onclick       = showToast;
document.getElementById('resetAll').onclick        = resetAll;

/* init */
presetDefault();
</script>
</body>
</html>
